@if (IsVisible)
{
    <div class="modal-backdrop @(IsVisible ? "show" : "")" @onclick="OnBackdropClick">
 <div class="modal-dialog @SizeClass" @onclick:stopPropagation="true">
  <div class="modal-content">
         @if (!string.IsNullOrEmpty(Title))
        {
          <div class="modal-header">
    <h5 class="modal-title">@Title</h5>
    @if (ShowCloseButton)
 {
      <button type="button" class="modal-close" @onclick="Close">&times;</button>
          }
       </div>
        }
    <div class="modal-body">
 @Body
   </div>
          @if (FooterContent != null)
        {
        <div class="modal-footer">
  @FooterContent
 </div>
         }
</div>
        </div>
    </div>
}

@code {
    [Parameter] public bool IsVisible { get; set; }
    [Parameter] public string Title { get; set; } = string.Empty;
    [Parameter] public string Size { get; set; } = "medium"; // small, medium, large, xlarge
    [Parameter] public bool ShowCloseButton { get; set; } = true;
    [Parameter] public bool CloseOnBackdrop { get; set; } = true;
 [Parameter] public RenderFragment? Body { get; set; }
    [Parameter] public RenderFragment? FooterContent { get; set; }
    [Parameter] public EventCallback OnClose { get; set; }

    private string SizeClass => Size switch
    {
        "small" => "modal-sm",
        "large" => "modal-lg",
     "xlarge" => "modal-xl",
        _ => ""
 };

    private async Task Close()
 {
   IsVisible = false;
     await OnClose.InvokeAsync();
 }

    private async Task OnBackdropClick()
    {
        if (CloseOnBackdrop)
  {
   await Close();
        }
    }
}

<style>
    .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
      width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
      align-items: center;
        z-index: 1050;
      opacity: 0;
        transition: opacity 0.3s ease;
    }

    .modal-backdrop.show {
        opacity: 1;
    }

    .modal-dialog {
   background: white;
        border-radius: 8px;
        width: 90%;
        max-width: 600px;
max-height: 90vh;
     overflow: hidden;
        display: flex;
 flex-direction: column;
        animation: modalSlideIn 0.3s ease;
    }

    .modal-sm {
        max-width: 400px;
    }

    .modal-lg {
  max-width: 800px;
    }

    .modal-xl {
   max-width: 1200px;
    }

    @@keyframes modalSlideIn {
        from {
   transform: translateY(-50px);
opacity: 0;
    }
        to {
      transform: translateY(0);
    opacity: 1;
        }
    }

    .modal-content {
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .modal-header {
  padding: 1.25rem 1.5rem;
        border-bottom: 1px solid #e9ecef;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .modal-title {
        margin: 0;
     font-size: 1.25rem;
        font-weight: 600;
      color: #333;
    }

    .modal-close {
     background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
    color: #999;
  width: 32px;
        height: 32px;
 display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        transition: all 0.2s;
    }

    .modal-close:hover {
        background-color: #f0f0f0;
        color: #333;
    }

    .modal-body {
    padding: 1.5rem;
    overflow-y: auto;
        flex: 1;
    }

    .modal-footer {
        padding: 1rem 1.5rem;
        border-top: 1px solid #e9ecef;
   display: flex;
        justify-content: flex-end;
        gap: 0.5rem;
    }
</style>
